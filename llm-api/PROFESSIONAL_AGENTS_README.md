# ä¸“ä¸šæ™ºèƒ½ä½“ç³»ç»Ÿæ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»äº†LLM-APIé¡¹ç›®ä¸­æ–°å¢çš„ä¸“ä¸šæ™ºèƒ½ä½“æç¤ºè¯ç³»ç»Ÿï¼ŒåŒ…å«å¤šä¸ªä¸“ä¸šé¢†åŸŸçš„AIåŠ©æ‰‹è§’è‰²ï¼Œæ”¯æŒæœ¬åœ°å’Œäº‘ç«¯æ¨¡å‹éƒ¨ç½²ã€‚

## ğŸ­ ä¸“ä¸šè§’è‰²ç›®å½•

### ğŸ’¼ å•†ä¸šä¸é‡‘è
- **é‡‘èåˆ†æå¸ˆ** (`financial_analyst`) - æŠ•èµ„åˆ†æã€é£é™©è¯„ä¼°ã€å¸‚åœºç ”ç©¶
- **å•†ä¸šé¡¾é—®** (`consultant`) - æˆ˜ç•¥è§„åˆ’ã€ä¸šåŠ¡ä¼˜åŒ–ã€ç®¡ç†å’¨è¯¢

### âš–ï¸ æ³•å¾‹ä¸åˆè§„
- **æ³•å¾‹é¡¾é—®** (`lawyer`) - æ³•å¾‹å’¨è¯¢ã€åˆåŒå®¡æŸ¥ã€åˆè§„æŒ‡å¯¼

### ğŸ¥ å¥åº·ä¸åŒ»ç–—
- **åŒ»ç”Ÿ** (`doctor`) - å¥åº·å’¨è¯¢ã€ç–¾ç—…é¢„é˜²ã€åŒ»ç–—å»ºè®®
- **å¿ƒç†åŒ»ç”Ÿ** (`psychologist`) - å¿ƒç†å¥åº·ã€æƒ…ç»ªç®¡ç†ã€å¿ƒç†æ²»ç–—
- **è¥å…»å¸ˆ** (`nutritionist`) - è¥å…»å’¨è¯¢ã€è†³é£Ÿæ­é…ã€å¥åº·é¥®é£Ÿ

### ğŸ’ª è¿åŠ¨ä¸å¥èº«
- **å¥èº«æ•™ç»ƒ** (`fitness_trainer`) - è¿åŠ¨æŒ‡å¯¼ã€è®­ç»ƒè®¡åˆ’ã€å¥åº·ç”Ÿæ´»

### ğŸ¨ åˆ›æ„ä¸è®¾è®¡
- **å®¤å†…è®¾è®¡å¸ˆ** (`interior_designer`) - ç©ºé—´è®¾è®¡ã€è£…ä¿®å»ºè®®ã€å®¶å±…æ­é…
- **æ‘„å½±å¸ˆ** (`photographer`) - æ‘„å½±æŠ€å·§ã€å™¨æå»ºè®®ã€åæœŸå¤„ç†

### ğŸ”§ æŠ€èƒ½ä¸æ‰‹å·¥
- **æœ¨åŒ ** (`carpenter`) - æœ¨å·¥æŠ€è‰ºã€å®¶å…·åˆ¶ä½œã€å·¥å…·ä½¿ç”¨

### ğŸ“š æ•™è‚²ä¸å­¦ä¹ 
- **æ•™å¸ˆ** (`teacher`) - æ•™å­¦æŒ‡å¯¼ã€å­¦ä¹ æ–¹æ³•ã€çŸ¥è¯†ä¼ æˆ
- **ç ”ç©¶å‘˜** (`researcher`) - å­¦æœ¯ç ”ç©¶ã€æ•°æ®åˆ†æã€æ–‡çŒ®è°ƒç ”

### ğŸ’» æŠ€æœ¯ä¸å¼€å‘
- **ç¨‹åºå‘˜** (`coder`) - ç¼–ç¨‹æŒ‡å¯¼ã€ä»£ç ä¼˜åŒ–ã€æŠ€æœ¯è§£å†³æ–¹æ¡ˆ
- **æ•°æ®åˆ†æå¸ˆ** (`analyst`) - æ•°æ®åˆ†æã€ç»Ÿè®¡å»ºæ¨¡ã€ä¸šåŠ¡æ´å¯Ÿ

### âœï¸ è¯­è¨€ä¸å†™ä½œ
- **å†™ä½œåŠ©æ‰‹** (`writer`) - æ–‡æ¡ˆåˆ›ä½œã€å†…å®¹ä¼˜åŒ–ã€å†™ä½œæŒ‡å¯¼
- **ç¿»è¯‘ä¸“å®¶** (`translator`) - å¤šè¯­è¨€ç¿»è¯‘ã€æœ¬åœ°åŒ–ã€è¯­è¨€å­¦ä¹ 

### ğŸ‘¨â€ğŸ³ ç”Ÿæ´»æœåŠ¡
- **ä¸“ä¸šå¨å¸ˆ** (`chef`) - çƒ¹é¥ªæŒ‡å¯¼ã€é£Ÿè°±æ¨èã€è¥å…»æ­é…

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from client import LLMClient
from config_manager import get_config
from models import ModelProvider

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = LLMClient(get_config())

# åˆ›å»ºä¸“ä¸šæ™ºèƒ½ä½“
success = client.create_agent_from_template(
    agent_id="my_doctor",
    template_id="doctor",
    name="æˆ‘çš„AIåŒ»ç”Ÿ",
    temperature=0.3,  # åŒ»ç–—å»ºè®®ä½¿ç”¨è¾ƒä½æ¸©åº¦
    max_tokens=1500,
    model="llama-3.2-3b-instruct",
    provider=ModelProvider.LMSTUDIO
)

if success:
    # è¿›è¡Œå’¨è¯¢
    response = client.chat(
        messages=[
            {"role": "user", "content": "æœ€è¿‘ç»å¸¸å¤´ç—›ï¼Œå¯èƒ½æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ"}
        ],
        agent_id="my_doctor"
    )
    print(f"AIåŒ»ç”Ÿå»ºè®®: {response}")
```

### æ‰¹é‡åˆ›å»ºæ™ºèƒ½ä½“

```python
# åˆ›å»ºå¤šä¸ªä¸“ä¸šæ™ºèƒ½ä½“
professionals = [
    {"id": "fitness_trainer", "temp": 0.7},
    {"id": "nutritionist", "temp": 0.4},
    {"id": "psychologist", "temp": 0.5}
]

for prof in professionals:
    client.create_agent_from_template(
        agent_id=f"my_{prof['id']}",
        template_id=prof['id'],
        name=f"æˆ‘çš„{prof['id']}",
        temperature=prof['temp'],
        max_tokens=1500
    )
```

## âš™ï¸ å‚æ•°è°ƒä¼˜å»ºè®®

### Temperature è®¾ç½®

| è§’è‰²ç±»å‹ | æ¨èTemperature | è¯´æ˜ |
|---------|----------------|------|
| åŒ»ç–—ç›¸å…³ (doctor, psychologist) | 0.2-0.4 | ç¡®ä¿åŒ»ç–—å»ºè®®çš„å‡†ç¡®æ€§å’Œå¯é æ€§ |
| æ³•å¾‹ç›¸å…³ (lawyer) | 0.2-0.3 | ç¡®ä¿æ³•å¾‹å»ºè®®çš„ä¸¥è°¨æ€§ |
| æŠ€æœ¯ç›¸å…³ (coder, analyst) | 0.3-0.5 | å¹³è¡¡å‡†ç¡®æ€§å’Œåˆ›æ–°æ€§ |
| åˆ›æ„ç›¸å…³ (designer, photographer) | 0.6-0.8 | å¢åŠ åˆ›é€ æ€§å’Œå¤šæ ·æ€§ |
| æ•™è‚²ç›¸å…³ (teacher, researcher) | 0.4-0.6 | å¹³è¡¡å‡†ç¡®æ€§å’Œå¯å‘æ€§ |
| ç”Ÿæ´»æœåŠ¡ (chef, fitness_trainer) | 0.5-0.7 | æä¾›å®ç”¨ä¸”æœ‰è¶£çš„å»ºè®® |

### Max Tokens è®¾ç½®

- **ç®€å•å’¨è¯¢**: 500-800 tokens
- **è¯¦ç»†æŒ‡å¯¼**: 1000-1500 tokens  
- **å¤æ‚åˆ†æ**: 1500-2000 tokens
- **æ•™å­¦å†…å®¹**: 2000+ tokens

## ğŸ”— æ¨¡å‹æ”¯æŒ

### æœ¬åœ°æ¨¡å‹

#### LM Studio
```python
from models import ModelProvider

client.create_agent_from_template(
    agent_id="local_agent",
    template_id="doctor",
    name="æœ¬åœ°åŒ»ç”Ÿ",
    model="llama-3.2-3b-instruct",
    provider=ModelProvider.LMSTUDIO
)
```

#### Ollama
```python
client.create_agent_from_template(
    agent_id="ollama_agent",
    template_id="fitness_trainer",
    name="Ollamaå¥èº«æ•™ç»ƒ",
    model="gemma2:2b",
    provider=ModelProvider.OLLAMA
)
```

### äº‘ç«¯API
```python
client.create_agent_from_template(
    agent_id="cloud_agent",
    template_id="lawyer",
    name="äº‘ç«¯å¾‹å¸ˆ",
    model="gpt-4",
    provider=ModelProvider.OPENAI
)
```

## ğŸ§ª æµ‹è¯•è„šæœ¬

### åŸºç¡€åŠŸèƒ½æµ‹è¯•
```bash
# æµ‹è¯•æ‰€æœ‰ä¸“ä¸šæ¨¡æ¿
python test_professional_agents.py

# æµ‹è¯•LM Studioé›†æˆ
python test_lmstudio_prompts.py

# æ¼”ç¤ºå®Œæ•´åŠŸèƒ½
python demo_enhanced_prompt_system.py
```

### è¯­æ³•æ£€æŸ¥
```bash
# æ£€æŸ¥Pythonæ–‡ä»¶è¯­æ³•
python check_syntax.py
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
prompts/
â”œâ”€â”€ fitness_trainer.json     # å¥èº«æ•™ç»ƒæ¨¡æ¿
â”œâ”€â”€ doctor.json             # åŒ»ç”Ÿæ¨¡æ¿
â”œâ”€â”€ psychologist.json       # å¿ƒç†åŒ»ç”Ÿæ¨¡æ¿
â”œâ”€â”€ carpenter.json          # æœ¨åŒ æ¨¡æ¿
â”œâ”€â”€ nutritionist.json       # è¥å…»å¸ˆæ¨¡æ¿
â”œâ”€â”€ interior_designer.json  # å®¤å†…è®¾è®¡å¸ˆæ¨¡æ¿
â”œâ”€â”€ photographer.json       # æ‘„å½±å¸ˆæ¨¡æ¿
â”œâ”€â”€ financial_analyst.json  # é‡‘èåˆ†æå¸ˆæ¨¡æ¿
â”œâ”€â”€ lawyer.json            # æ³•å¾‹é¡¾é—®æ¨¡æ¿
â””â”€â”€ chef.json              # ä¸“ä¸šå¨å¸ˆæ¨¡æ¿

test_scripts/
â”œâ”€â”€ test_professional_agents.py      # ä¸“ä¸šæ™ºèƒ½ä½“æµ‹è¯•
â”œâ”€â”€ test_lmstudio_prompts.py        # LM Studioé›†æˆæµ‹è¯•
â”œâ”€â”€ demo_enhanced_prompt_system.py  # å®Œæ•´åŠŸèƒ½æ¼”ç¤º
â””â”€â”€ fix_template_format.py          # æ¨¡æ¿æ ¼å¼ä¿®å¤å·¥å…·
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. è§’è‰²é€‰æ‹©
- æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„ä¸“ä¸šè§’è‰²
- è€ƒè™‘é—®é¢˜çš„å¤æ‚åº¦å’Œä¸“ä¸šæ€§è¦æ±‚
- å¯ä»¥ç»„åˆå¤šä¸ªè§’è‰²è·å¾—å…¨é¢å»ºè®®

### 2. æç¤ºè¯ä¼˜åŒ–
- æä¾›æ¸…æ™°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- ä½¿ç”¨å…·ä½“çš„ä¾‹å­å’Œåœºæ™¯
- æ˜ç¡®æœŸæœ›çš„è¾“å‡ºæ ¼å¼
- é€‚å½“ä½¿ç”¨è§’è‰²æ‰®æ¼”æŠ€å·§

### 3. å®‰å…¨è€ƒè™‘
- åŒ»ç–—å»ºè®®ä»…ä¾›å‚è€ƒï¼Œä¸¥é‡é—®é¢˜è¯·å°±åŒ»
- æ³•å¾‹å»ºè®®ä¸èƒ½æ›¿ä»£ä¸“ä¸šå¾‹å¸ˆå’¨è¯¢
- æŠ•èµ„å»ºè®®éœ€è¦ç»“åˆä¸ªäººé£é™©æ‰¿å—èƒ½åŠ›
- æ‰€æœ‰ä¸“ä¸šå»ºè®®éƒ½åº”è¯¥è°¨æ…å¯¹å¾…

### 4. æ€§èƒ½ä¼˜åŒ–
- æ ¹æ®æ¨¡å‹æ€§èƒ½è°ƒæ•´å‚æ•°
- ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—
- åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´
- ç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ”§ è‡ªå®šä¹‰æ¨¡æ¿

### åˆ›å»ºæ–°æ¨¡æ¿

1. åœ¨ `prompts/` ç›®å½•åˆ›å»ºJSONæ–‡ä»¶
2. æŒ‰ç…§ä»¥ä¸‹æ ¼å¼ç¼–å†™:

```json
{
  "name": "è§’è‰²åç§°",
  "role": "role_id",
  "description": "è§’è‰²æè¿°",
  "system_prompt": "è¯¦ç»†çš„ç³»ç»Ÿæç¤ºè¯",
  "examples": [{
    "user": "ç”¨æˆ·é—®é¢˜ç¤ºä¾‹",
    "assistant": "AIå›å¤ç¤ºä¾‹"
  }],
  "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"]
}
```

3. åœ¨ `prompt_manager.py` ä¸­æ·»åŠ æ–°çš„ `AgentRole`
4. æµ‹è¯•æ–°æ¨¡æ¿åŠŸèƒ½

### æ¨¡æ¿éªŒè¯
```python
from prompt_manager import PromptManager

pm = PromptManager()
template = pm.load_template("your_template_id")

if template:
    print(f"æ¨¡æ¿åŠ è½½æˆåŠŸ: {template.name}")
else:
    print("æ¨¡æ¿åŠ è½½å¤±è´¥")
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ¨¡æ¿åŠ è½½å¤±è´¥**
   - æ£€æŸ¥JSONæ ¼å¼æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æ–‡ä»¶è·¯å¾„å’Œæƒé™
   - éªŒè¯æ¨¡æ¿ç»“æ„å®Œæ•´æ€§

2. **LM Studioè¿æ¥å¤±è´¥**
   - ç¡®ä¿LM Studioæ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥ç«¯å£é…ç½® (é»˜è®¤1234)
   - éªŒè¯æ¨¡å‹æ˜¯å¦å·²åŠ è½½

3. **æ™ºèƒ½ä½“åˆ›å»ºå¤±è´¥**
   - æ£€æŸ¥template_idæ˜¯å¦å­˜åœ¨
   - éªŒè¯å‚æ•°æ ¼å¼æ­£ç¡®æ€§
   - ç¡®è®¤æ¨¡å‹å’Œæä¾›å•†åŒ¹é…

### è°ƒè¯•æŠ€å·§

```python
# å¯ç”¨è¯¦ç»†æ—¥å¿—
import logging
logging.basicConfig(level=logging.DEBUG)

# æ£€æŸ¥å¯ç”¨æ¨¡æ¿
from prompt_manager import PromptManager
pm = PromptManager()
print("å¯ç”¨æ¨¡æ¿:", pm.list_templates())

# éªŒè¯é…ç½®
from config_manager import get_config
config = get_config()
print("é…ç½®ä¿¡æ¯:", config)
```

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### å“åº”æ—¶é—´ç›‘æ§
```python
import time

start_time = time.time()
response = client.chat(messages=[...], agent_id="test_agent")
end_time = time.time()

print(f"å“åº”æ—¶é—´: {end_time - start_time:.2f}ç§’")
print(f"å“åº”é•¿åº¦: {len(response)}å­—ç¬¦")
```

### èµ„æºä½¿ç”¨ç›‘æ§
```python
import psutil
import os

# å†…å­˜ä½¿ç”¨
process = psutil.Process(os.getpid())
memory_usage = process.memory_info().rss / 1024 / 1024  # MB
print(f"å†…å­˜ä½¿ç”¨: {memory_usage:.2f}MB")

# CPUä½¿ç”¨
cpu_usage = process.cpu_percent()
print(f"CPUä½¿ç”¨: {cpu_usage:.2f}%")
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æ·»åŠ æ–°çš„ä¸“ä¸šè§’è‰²

1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºæ–°çš„æ¨¡æ¿æ–‡ä»¶
3. æ›´æ–° `AgentRole` æšä¸¾
4. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
5. æ›´æ–°æ–‡æ¡£
6. æäº¤Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨Python 3.8+
- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®åœ°å€**: [GitHub Repository]
- **é—®é¢˜åé¦ˆ**: [Issues]
- **åŠŸèƒ½è¯·æ±‚**: [Feature Requests]
- **æ–‡æ¡£æ›´æ–°**: [Documentation]

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License] å¼€æºè®¸å¯è¯ã€‚

---

*æœ€åæ›´æ–°: 2024å¹´12æœˆ*